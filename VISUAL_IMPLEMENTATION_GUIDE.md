# Visual Implementation Guide - Database Integration

## Dashboard UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Organization Dashboard - Help Requests (Confirmed Pins)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  âš ï¸  Help Requests (Confirmed Pins)                        ğŸ“ Location â”‚
â”‚                                                                 [Filter] â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Medical Supplies Needed                           [Partially Accepted] â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚ ğŸ“ Yangon Downtown, Main Street                                   â”‚ â”‚
â”‚  â”‚ â° 12/11/2025, 12:09 AM                                            â”‚ â”‚
â”‚  â”‚ ğŸ“ Requested by: Hospital A                                        â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚ Required Items:                                                    â”‚ â”‚
â”‚  â”‚  â—‹ Medicine: 50 boxes (20 remaining)                              â”‚ â”‚
â”‚  â”‚  â—‹ Water: 200 bottles (80 remaining)                              â”‚ â”‚
â”‚  â”‚  â—‹ Blanket: 100 pieces (100 remaining)                            â”‚ â”‚
â”‚  â”‚  â—‹ Food pack: 150 packs (150 remaining)                           â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚                            [ğŸ‘ View Details] [ğŸ—ºï¸ View on Map]      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Food Distribution                                     [Pending]        â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚ ğŸ“ Mandalay District, Central Park                                 â”‚ â”‚
â”‚  â”‚ â° 12/11/2025, 10:09 AM                                            â”‚ â”‚
â”‚  â”‚ ğŸ“ Requested by: Shelter Manager                                  â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚ Required Items:                                                    â”‚ â”‚
â”‚  â”‚  â—‹ Food pack: 200 packs (200 remaining)                           â”‚ â”‚
â”‚  â”‚  â—‹ Water: 300 bottles (300 remaining)                             â”‚ â”‚
â”‚  â”‚  â—‹ Blanket: 150 pieces (150 remaining)                            â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚                            [ğŸ‘ View Details] [ğŸ—ºï¸ View on Map]      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Rescue Equipment                                      [Pending]        â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚ ğŸ“ Industrial Zone, Block 5                                        â”‚ â”‚
â”‚  â”‚ â° 12/11/2025, 08:09 AM                                            â”‚ â”‚
â”‚  â”‚ ğŸ“ Requested by: Fire Department                                   â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚ Required Items:                                                    â”‚ â”‚
â”‚  â”‚  â—‹ Medicine: 30 boxes (30 remaining)                              â”‚ â”‚
â”‚  â”‚  â—‹ Water: 150 bottles (150 remaining)                             â”‚ â”‚
â”‚  â”‚  â—‹ Food pack: 100 packs (100 remaining)                           â”‚ â”‚
â”‚  â”‚  â—‹ Clothes: 80 packs (80 remaining)                               â”‚ â”‚
â”‚  â”‚  â—‹ Blanket: 120 pieces (120 remaining)                            â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚                            [ğŸ‘ View Details] [ğŸ—ºï¸ View on Map]      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Badge Styles (One Per Card)

```
PENDING (Yellow)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [yellow badge]   â”‚
â”‚    Pending       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Meaning: No items fulfilled

PARTIALLY ACCEPTED (Blue)  
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [blue badge]             â”‚
â”‚ Partially Accepted       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Meaning: Some items fulfilled

COMPLETED (Hidden)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Card Removed     â”‚
â”‚ From List        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Meaning: All items fulfilled
```

---

## View Details Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ View Request Details                                      [X]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ Medical Supplies Needed                                         â”‚
â”‚ ğŸ“ Yangon Downtown, Main Street                                â”‚
â”‚ â° 12/11/2025, 12:09 AM â€¢ Requested by: Hospital A             â”‚
â”‚                                                                 â”‚
â”‚ âš ï¸  Adjust the quantities you can provide. The remaining        â”‚
â”‚    quantities will be updated automatically.                   â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Required Items                                              â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Category     â”‚ Unit     â”‚ Remaining  â”‚ You Can Provide      â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Medicine     â”‚ boxes    â”‚ 50         â”‚ [_____________]      â”‚ â”‚
â”‚ â”‚              â”‚          â”‚ / 50       â”‚ (max 50)             â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Water        â”‚ bottles  â”‚ 200        â”‚ [_____________]      â”‚ â”‚
â”‚ â”‚              â”‚          â”‚ / 200      â”‚ (max 200)            â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Blanket      â”‚ pieces   â”‚ 100        â”‚ [_____________]      â”‚ â”‚
â”‚ â”‚              â”‚          â”‚ / 100      â”‚ (max 100)            â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Food pack    â”‚ packs    â”‚ 150        â”‚ [_____________]      â”‚ â”‚
â”‚ â”‚              â”‚          â”‚ / 150      â”‚ (max 150)            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚                    [Accept Request] [Cancel]                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Accepted Items Table (Partially Accepted Status)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Accepted Items                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Category     â”‚ Unit     â”‚ Original â”‚ Accepted  â”‚ Remaining      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Medicine     â”‚ boxes    â”‚ 50       â”‚ 30        â”‚ 20 still need  â”‚
â”‚              â”‚          â”‚          â”‚           â”‚ (40%)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Water        â”‚ bottles  â”‚ 200      â”‚ 120       â”‚ 80 still need  â”‚
â”‚              â”‚          â”‚          â”‚           â”‚ (40%)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Food pack    â”‚ packs    â”‚ 150      â”‚ 0         â”‚ 150 still need â”‚
â”‚              â”‚          â”‚          â”‚           â”‚ (100%)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Status Calculation Flow (Visual)

```
Pin in Database
      â†“
    pins table
    â”œâ”€ id: pin-1
    â”œâ”€ status: confirmed â† Organization will handle this
    â”œâ”€ latitude: 16.8409
    â”œâ”€ longitude: 96.1735
    â””â”€ description: ...
      â†“
Check related pin_items
      â”œâ”€ pin_item_1: Medicine (req: 50, rem: 20)
      â”œâ”€ pin_item_2: Water (req: 200, rem: 80)
      â”œâ”€ pin_item_3: Blanket (req: 100, rem: 100)
      â””â”€ pin_item_4: Food (req: 150, rem: 150)
      â†“
Calculate Status
      â”œâ”€ Check: Any rem === 0? NO âœ—
      â”‚         (Not all completed)
      â”‚
      â”œâ”€ Check: Any 0 < rem < req? YES âœ“
      â”‚         (Medicine: 20 < 50, Water: 80 < 200)
      â”‚
      â””â”€ Status = "partially_accepted" âœ“
      â†“
Geocode Coordinates
      â””â”€ (16.8409, 96.1735) â†’ "Yangon Downtown, Myanmar"
      â†“
Display on Dashboard
      â”œâ”€ Title: Medical Supplies Needed
      â”œâ”€ Location: Yangon Downtown, Myanmar [geocoded]
      â”œâ”€ Badge: Partially Accepted [blue]
      â”œâ”€ Required Items: 4 items shown
      â”œâ”€ Accepted Items: 2 items shown (Medicine, Water)
      â””â”€ View Details button
```

---

## Status Transition Diagram

```
Pin Created
    â†“
status: pending (in pins table)
    â†“
NOT shown on org dashboard
(dashboard only shows status='confirmed' pins)
    â†“
Tracker Confirms Pin
(from home page confirmation flow)
    â†“
status: confirmed
    â†“
âœ… NOW APPEARS on org dashboard
    â”œâ”€ Status Badge: "Pending" (yellow)
    â”‚  â””â”€ Meaning: No items fulfilled yet
    â”‚     (All rem === req)
    â†“
Organization Accepts Some Items
(from View Details modal)
    â†“
Update pin_items.remaining_qty
    â”œâ”€ Medicine: rem 50 â†’ 20
    â”œâ”€ Water: rem 200 â†’ 80
    â””â”€ Food: rem 150 â†’ 150
    â†“
Dashboard Refreshes
    â”œâ”€ Status recalculates: "Partially Accepted" (blue)
    â”‚  â””â”€ Meaning: Some items fulfilled
    â”‚     (Some 0 < rem < req)
    â”‚
    â””â”€ Accepted Items section shows:
       â”œâ”€ Medicine: 30 accepted of 50
       â”œâ”€ Water: 120 accepted of 200
       â””â”€ Food: 0 accepted of 150
    â†“
Organization Accepts Remaining Items
    â”œâ”€ Medicine: rem 20 â†’ 0
    â”œâ”€ Water: rem 80 â†’ 0
    â””â”€ Food: rem 150 â†’ 0
    â†“
Dashboard Refreshes
    â”œâ”€ Detects: All rem === 0
    â”œâ”€ Deletes all pin_items records
    â”œâ”€ Updates pins: status = 'completed'
    â””â”€ âŒ CARD REMOVED from dashboard
    â†“
NOT shown on org dashboard anymore
(completed pins are excluded)
```

---

## Data Mapping: pins â†’ HelpRequest

```
Database (pins table)
    â†“â†“â†“
    pin-1: {
      id: "uuid-1",
      latitude: 16.8409,
      longitude: 96.1735,
      type: "damage",
      status: "confirmed",
      description: "Building partially damaged",
      user_id: "usr-1",
      phone: "09123456789",
      created_at: "2024-12-11T12:09:00Z"
    }
    â†“â†“â†“
Transformed to HelpRequest:

HelpRequest {
  id: "uuid-1",                              â† from pins.id
  title: "Emergency Response - Damage Report", â† generated from pins.type
  description: "Building partially damaged",  â† from pins.description
  location: "Yangon Downtown, Myanmar",       â† geocoded from lat/lng
  lat: 16.8409,                              â† from pins.latitude
  lng: 96.1735,                              â† from pins.longitude
  region: "Yangon Downtown, Myanmar",        â† same as location (geocoded)
  status: "pending",                         â† calculated from pin_items
  requestedBy: "Alice",                      â† from users table
  requestedAt: 2024-12-11T12:09:00Z,        â† from pins.created_at
  requiredItems: [                           â† from pin_items joined with items
    {
      category: "Medicine",                  â† from items.name
      unit: "boxes",                         â† from items.unit
      quantity: 50,                          â† from pin_items.requested_qty
      itemId: "uuid-item-1",
      pinItemId: "uuid-pinitem-1",
      remainingQty: 20                       â† from pin_items.remaining_qty
    },
    ...
  ]
}
```

---

## Accept Workflow (Visual)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: User Views Details                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ Modal shows:                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Medicine: 50 boxes needed (0 remaining shown)         â”‚   â”‚
â”‚ â”‚ Water: 200 bottles needed                             â”‚   â”‚
â”‚ â”‚ Food pack: 150 packs needed                           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: User Enters Quantities                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ Accept Dialog:                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Medicine:    [30] / 50 boxes                          â”‚   â”‚
â”‚ â”‚ Water:       [120] / 200 bottles                      â”‚   â”‚
â”‚ â”‚ Food pack:   [ ] / 150 packs (user leaves empty)     â”‚   â”‚
â”‚ â”‚                [Accept Request] [Cancel]              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Backend Processes                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ acceptHelpRequestItems(pin-1, [                            â”‚
â”‚   {pinItemId: pni-1, acceptedQuantity: 30},               â”‚
â”‚   {pinItemId: pni-2, acceptedQuantity: 120}               â”‚
â”‚ ])                                                          â”‚
â”‚                                                              â”‚
â”‚ For each item:                                              â”‚
â”‚ â”Œâ”€ pni-1 (Medicine):                                     â”‚
â”‚ â”‚  requested_qty: 50                                      â”‚
â”‚ â”‚  accepted: 30                                           â”‚
â”‚ â”‚  new remaining_qty: 50 - 30 = 20                       â”‚
â”‚ â”‚  UPDATE pin_items SET remaining_qty = 20              â”‚
â”‚ â”‚                                                         â”‚
â”‚ â”œâ”€ pni-2 (Water):                                        â”‚
â”‚ â”‚  requested_qty: 200                                     â”‚
â”‚ â”‚  accepted: 120                                          â”‚
â”‚ â”‚  new remaining_qty: 200 - 120 = 80                     â”‚
â”‚ â”‚  UPDATE pin_items SET remaining_qty = 80              â”‚
â”‚ â”‚                                                         â”‚
â”‚ â””â”€ pni-3 (Food): NOT IN ACCEPTED LIST, unchanged         â”‚
â”‚    remaining_qty: 150 (still)                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Dashboard Refreshes                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚ fetchConfirmedPinsForDashboard() runs again               â”‚
â”‚                                                              â”‚
â”‚ New pin_items values:                                       â”‚
â”‚ â”œâ”€ Medicine: req=50, rem=20 (PARTIAL) âœ“                  â”‚
â”‚ â”œâ”€ Water: req=200, rem=80 (PARTIAL) âœ“                    â”‚
â”‚ â””â”€ Food: req=150, rem=150 (NOT FULFILLED)                â”‚
â”‚                                                              â”‚
â”‚ Status calculation:                                         â”‚
â”‚ "Any 0 < rem < req?" YES â†’ Status = "partially_accepted" â”‚
â”‚                                                              â”‚
â”‚ Card updates:                                               â”‚
â”‚ â”œâ”€ Badge changes to [Partially Accepted] âœ“               â”‚
â”‚ â””â”€ Shows accepted items breakdown âœ“                       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Cases (Visual)

```
âŒ REVERSE GEOCODING FAILS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Card displays:                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Medical Supplies Needed              â”‚
â”‚ ğŸ“ Location unknown (coords shown)  â”‚
â”‚ [All other info shows normally]      â”‚
â”‚ [Badge shows correctly]              â”‚
â”‚ [View Details works]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ NO ITEMS FOR PIN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Card displays:                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Emergency Response - Damage Report   â”‚
â”‚ ğŸ“ Yangon Downtown, Myanmar         â”‚
â”‚ [Pending]                           â”‚
â”‚ Required Items: (none shown)        â”‚
â”‚ Status: pending (logic works)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ API KEY MISSING
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser Console:                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Error: GOOGLE_MAPS_API_KEY not set  â”‚
â”‚                                     â”‚
â”‚ Dashboard shows cards without       â”‚
â”‚ addresses (fallback to "unknown")   â”‚
â”‚                                     â”‚
â”‚ Action: Add key to .env.local       â”‚
â”‚ Restart dev server                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary Checklists

### âœ… Backend Tasks (DONE)

- [x] Create reverse geocoding API route
- [x] Add 4 service functions
- [x] Write comprehensive documentation
- [x] Create architecture diagrams
- [x] Create implementation guides

### â³ Frontend Tasks (TO DO)

- [ ] Add GOOGLE_MAPS_API_KEY to .env.local
- [ ] Update organization/page.tsx
  - [ ] Import service functions
  - [ ] Update useEffect to fetch from database
  - [ ] Remove mock data
  - [ ] Update card display
  - [ ] Update modal logic
  - [ ] Update badge styling
- [ ] Test with real database
- [ ] Test status calculations
- [ ] Test accept workflow
- [ ] Deploy

